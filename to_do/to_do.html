<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Pasta â€¢ Proof</title>

  <style>
    html,head,body { padding:0; margin:0; }
    body { font-family: calibri, helvetica, arial, sans-serif; }
  </style>
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <script type="text/javascript" src="elm.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="pasta-proof"></div>
  <script>
/*      var node = document.getElementById('pasta-proof');
      var app = Elm.Main.embed(node);

      app.ports.renderEquation.subscribe(function(json_str) {
        var obj = JSON.parse(json_str);

        var id_selector = 'math-jax-out-' + obj.id;
        var node = document.getElementById(id_selector);
        node.innerHTML = "$$" + obj.en_TeX + "$$";
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, id_selector]);
      });
      */
  </script>
</body>

<script type="text/javascript">
storedState = localStorage.getItem('elm-todo-save');
var startingState = storedState ? JSON.parse(storedState) : null;
var app = Elm.Main.fullscreen(startingState);
app.ports.setStorage.subscribe(function(state) {
    localStorage.setItem('elm-todo-save', JSON.stringify(state));
    for(e in state.entries) {
      renderEquation(state.entries[e]);
    }
});

function renderEquation(obj) {

  var id_selector = 'math-jax-out-' + obj.id;
  var node = document.getElementById(id_selector);
  node.innerHTML = "$$" + obj.description + "$$";
  MathJax.Hub.Queue(["Typeset", MathJax.Hub, id_selector]);
}
</script>

</html>
